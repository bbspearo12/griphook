
<div>
    <h2>Project report for: {{vm.project.name}}</h2>
    <hr>
    <jhi-alert-error></jhi-alert-error>
    <dl class="dl-horizontal jh-entity-details">
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th><span>Accout Manager</span></th>
                    <th><span>Presales Architect</span></th>
                    <th><span>Default Project Margin</span></th>
                    <th><span>Subcontract Project Margin</span></th>
                    <th><span>PMpercentage</span></th>
                    <th><span>Risk (%)</span></dt></th>
                </tr>
                </thead>
                <tbody >
                    <td><span>{{vm.project.accoutManager}}</span></td>
                    <td><span>{{vm.project.presalesArchitect}}</span></td>
                    <td><span>{{vm.project.defaultProjectMargin}}</span></td>
                    <td><span>{{vm.project.subcontractProjectMargin}}</span></td>
                    <td><span>{{vm.project.pmpercentage}}</span></td>
                    <td><span>{{vm.project.risk}}</span></td>
                </tbody>
            </table>
        </div>
    </dl>

    <h4><span>Project Total Cost (in $)</span></h4>

    <dl class="dl-horizontal jh-entity-details">
        <div class="table-responsive">
            <table class="jh-table table table-striped">
                <thead>
                <tr>
                    <th><span>Engineering Cost</span></th>
                    <th><span>PM Cost</span></th>
                    <th><span>Total cost (w/margin)</span></th>
                    <th><span>Project Total (w/risk)</span></th>

                </tr>
                </thead>
                <tbody>
                <td><h4><span class="label label-success">{{vm.engTotal |number:0}}</span></h4></td>
                <td><h4><span class="label label-info" >{{vm.pmTotal | number:0}}</span></h4></td>
                <td><h4><span class="label label-info">{{vm.engTotal + vm.pmTotal + ((vm.engTotal + vm.pmTotal)*vm.project.defaultProjectMargin/100) | number:0 }}</h4></span></td>
                <td><h4><span class="label label-primary" >{{vm.engTotal + vm.pmTotal + ((vm.engTotal + vm.pmTotal)*vm.project.defaultProjectMargin/100) + ((vm.engTotal + vm.pmTotal)*vm.project.risk/100) | number:0}}</h4></span></span></td>
                </tbody>
            </table>
        </div>
    </dl>



    <h4><span>Phases</span></h4>
    <div class="table-responsive">
        <table class="table table-bordered table-striped" ng-repeat="phase in vm.viewData track by phase.id">
            <thead>
            <tr>
                <th class="table-responsive"><span>Name</span></th>
                <th class="table-responsive"><span>Phase Total</span></th>
                <th class="table-responsive"><span>Phase Total w/Margin</span></th>
                <th class="table-responsive"><span>Total Phase Hours</span></th>

            </tr>
            </thead>
            <tbody >
                <td class="table-responsive"><span>{{phase.name}}</span></td>
                <td class="table-responsive"><span>{{phase.subTotal}}</span></td>
                <td class="table-responsive"><span>{{phase.subTotal + (phase.subTotal*vm.project.defaultProjectMargin/100) | number:0}}</span></td>
                <td class="table-responsive"><span>{{phase.phaseEstHours}}</span></td>

                <tr>
                        <th scope="col"><span class="border">Task Name</span></th>
                        <th scope="col"><span>Estimated Hours</span></th>
                        <th scope="col"><span>Resource</span></th>
                        <th scope="col"><span>Cost</span></th>
                        <th scope="col"><span>Number of Resources</span></th>
                        <th scope="col"><span>Subtotal</span></th>
                    </tr>
                    <tr ng-repeat="task in phase.tasks">
                        <td><span>{{task.name}}</span></td>
                        <td><span>{{task.estimatedHours}}</span></td>
                        <td><span>{{task.resource}}</span></td>
                        <td><span>{{task.cost}}</span></td>
                        <td><span>{{task.numberOfResources}}</span></td>
                        <td><span>{{task.subTotal}}</span></td>
                    </tr>
            </tbody>
        </table>
    </div>

    <button type="submit"
            ui-sref="{{ vm.previousState }}"
            class="btn btn-info">
        <span class="glyphicon glyphicon-arrow-left"></span>&nbsp;<span> Back</span>
    </button>

    <button type="button" ui-sref="project-detail.edit({id:vm.project.id})" class="btn btn-primary">
        <span class="glyphicon glyphicon-pencil"></span>
        <span class="hidden-sm-down"> Edit</span>
    </button>
    <button type="button" ng-click="exp(vm.project.id)" class="btn btn-primary">
        <span class="glyphicon glyphicon-export"></span>
        <span class="hidden-sm-down"> Export (comingsoon)</span>
    </button>
</div>
